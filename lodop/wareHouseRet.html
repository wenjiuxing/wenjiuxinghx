<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">

<head>
    <script src='./jquery-2.1.1.min.js'></script>

    <script src='./LodopFuncs.js'></script>
  
    <script src='./DataOjbect.js'></script>
    <script src='./GetPrintValues.js'></script>
    <script src='./DoPrintModels.js'></script>

</head>
<style>
</style>

<body>
    <button onclick="Ware()" style='width:110px;height:32px;background:#1890ff;color:white;border:none;border-radius:3px;line-height: 20px'>打印</button>

</body>
<script>

    function Ware() {
        var selectedRow = JSON.parse(sessionStorage.selectedRows)
        var code = sessionStorage.warehouseCode
        var warehouseType = sessionStorage.typeprint
      
          
            if (selectedRow.length == 1) {
                $.ajax({
                    url: 'http://api.wms.yncic.com/sys/wms/sysUacUsers/findDepartmentByUserName?userName=' + selectedRow[0].receiptCreateBy,
                    dataType: 'json',
                    type: 'Get',
                    async: false,
                    headers: {
                        'authorization': sessionStorage.getItem('token')
                    },
                    success: function (headsData) {
                        console.log(headsData)
                        doReturnWarehouseReceiptPrint(0, sessionStorage.companyName,  headsData.departmentName,sessionStorage.factory,code, sessionStorage.typeprint)
                      
                    }
                })
               
            }
            else {
                for (var i = 0; i < selectedRow.length; i++) {
                    for (var i = 0; i < selectedRow.length; i++) {
                (function(){
                    $.ajax({
                    url: 'http://api.wms.yncic.com/sys/wms/sysUacUsers/findDepartmentByUserName?userName=' + selectedRow[i].receiptCreateBy,
                    dataType: 'json',
                    type: 'Get',
                    async: false,
                    headers: {
                        'authorization': sessionStorage.getItem('token')
                    },
                    success: function (headsData) {
                        console.log(headsData)
                        doReturnWarehouseReceiptPrint(1, sessionStorage.companyName,headsData.departmentName,sessionStorage.factory,selectedRow[i].warehouseCode, sessionStorage.typeprint)
                      
                    }
                })
                  

                    })(i)
                
            }
                  
                }
            }
    }


</script>

</html>