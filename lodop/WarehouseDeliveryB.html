<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">

<head>
        <script src='./jquery-2.1.1.min.js'></script>
    
        <script src='./LodopFuncs.js'></script>
       
        <script src='./DataOjbect.js'></script>
        <script src='./GetPrintValues.js'></script>
        <script src='./DoPrintModels.js'></script>
</head>
<style>
</style>

<body>
    <!-- 采购退货打印 -->
    <button onclick="Ware()" style='width:110px;height:32px;background:#1890ff;color:white;border:none;border-radius:3px;line-height: 20px'>打印</button>

</body>
<script>

    function Ware() {
        var selectedRow = JSON.parse(sessionStorage.selectedRows)
        var code=sessionStorage.warehouseCode
        var warehouseType=sessionStorage.warehouseType
       
     if(selectedRow.length==1){
        doPurchaseWarehouseDeliveryPrint(0,sessionStorage.departmentName,JSON.parse(sessionStorage.factory),code,sessionStorage.companyName,sessionStorage.typeprint)
     }
     else{
        (function(){
            $.ajax({
                    url: 'http://api.wms.yncic.com/sys/wms/sysUacUsers/findDepartmentByUser?departmentId=' + selectedRow[i].departmentId,
                    dataType: 'json',
                    type: 'Get',
                    async: false,
                    headers: {
                        'authorization': sessionStorage.getItem('token')
                    },
                    success: function (headsData) {
                        console.log(headsData)
                        doPurchaseWarehouseDeliveryPrint(1,headsData.data.departmentName,JSON.parse(sessionStorage.factory),selectedRow[i].outWarehouseCode,sessionStorage.companyName,sessionStorage.typeprint)
                    }
                })  

                    })(i)
       
     }
            //大
          
    
    }


</script>

</html>